{"version":3,"sources":["../../source/sandbox/cd.js"],"names":[],"mappings":"AAAA;AACA,OAAO,KAAP,MAAkB,UAAlB;AACA,SAAS,aAAa,IAAI,aAA1B,QAA+C,QAA/C;AACA;AACA;AACA;AACA;AACA,OAAO,IAAP,MAAiB,MAAjB;AACA;;AAEA;AACA;AACA,MAAM,OAAO,GAAG,OAAhB;AACA,MAAM,OAAO,GAAG,aAAa,CAAC,MAAM,CAAC,IAAP,CAAY,GAAb,CAA7B;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,eAAe,IAAf,GAAsB;;AAEpB,MAAI;;AAEF,QAAI,QAAQ,GAAG,OAAO,CAAC,OAAR,CAAgB,4CAAhB,CAAf;AACA,QAAI,UAAU,GAAG,IAAI,CAAC,OAAL,CAAa,QAAb,CAAjB,CAHE,CAGsC;;AAExC,QAAI,MAAM,GAAG;AACX,iBAAW;AACT,gBAAQ,KAAK,CAAC,MAAN,CAAa,GAAb,CAAiB,OADhB;AAET,iBAAS,KAAK,CAAC,MAAN,CAAa,GAAb,CAAiB,OAFjB,EADA;;AAKX,iBAAW;AACT,MAAA,KAAK,CAAC,OAAN,CAAc,GADL;AAET,MAAA,KAAK,CAAC,OAAN,CAAc,MAFL,CALA,EAAb;;;;AAWA,IAAA,OAAO,CAAC,GAAR,CAAY,UAAZ;;AAEA,IAAA,KAAK,CAAC,UAAD,EAAa,MAAb,EAAqB,CAAC,MAAD,KAAY;AACpC,MAAA,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,YAAnB,EADoC,CACH;AACjC,MAAA,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,eAAnB,EAFoC,CAEA;AACpC,MAAA,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,OAAnB,EAHoC,CAGR;AAC5B;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,YAAnB,EALoC,CAKH;AACjC,MAAA,OAAO,CAAC,GAAR,CAAY,MAAM,CAAC,WAAnB,EANoC,CAMJ;AACjC,KAPI,CAAL;;AASD,GA3BD,CA2BE,OAAO,KAAP,EAAc;AACd,IAAA,OAAO,CAAC,KAAR,CAAc,KAAd;AACD;;AAEF;;AAED,IAAI","file":"cd.js","sourcesContent":["// import '@virtualpatterns/mablung-source-map-support/install'\nimport Check from 'depcheck'\nimport { createRequire as CreateRequire } from 'module'\n// import FileSystem from 'fs-extra'\n// import Is from '@pwn/is'\n// import JSON5 from 'json5'\n// import Match from 'minimatch'\nimport Path from 'path'\n// import Query from 'jsonpath'\n\n// const FilePath = __filePath\n// const FolderPath = Path.dirname(FilePath)\nconst Process = process\nconst Require = CreateRequire(import.meta.url)\n\n// function parseAvaFromPackage(filePath) {\n\n//   console.log(`content = '${content}'`)\n\n//   // let Package = JSON5.parse(content)\n//   // let ava = Package.ava\n//   // let dependencyName = ava.require\n\n//   // return dependencyName\n\n// }\n\n// async function parseStaticBabelConfiguration(filePath) {\n//   // console.log(`parseStaticBabelConfiguration('${Path.relative('', filePath)}') { ... }`)\n\n//   let dependency = []\n\n//   let fileName = Path.basename(filePath)\n//   let pattern = [ 'package.json', 'babel.config.json', '.babelrc.json', 'poop*.json' ]\n\n//   if (pattern.reduce((isMatch, pattern) => isMatch ? isMatch : Match(fileName, pattern, { 'dot': true }), false)) {\n\n//     let configuration = null\n//     configuration = JSON5.parse(await FileSystem.readFile(filePath, { 'encoding': 'utf-8' }))\n//     configuration = fileName === 'package.json' ? (configuration.babel || {}) : configuration\n\n//     let plugin = null\n//     plugin = Query.query(configuration, '$..plugins[*]')\n//     plugin = plugin.filter((plugin) => Is.array(plugin) || plugin !== 'importMeta')\n//     plugin = plugin.map((plugin) => Is.array(plugin) ? plugin[0] : plugin)\n\n//     let preset = null\n//     preset = Query.query(configuration, '$..presets[*]')\n//     preset = preset.map((preset) => Is.array(preset) ? preset[0] : preset)\n\n//     dependency = [...plugin, ...preset]\n\n//   }\n\n//   return dependency\n\n// }\n\nasync function main() {\n\n  try {\n\n    let filePath = Require.resolve('../../../mablung-babel-plugin/package.json')\n    let folderPath = Path.dirname(filePath) // Process.cwd() // \n\n    let option = {\n      'parsers': {\n        '*.js': Check.parser.es7.default,\n        '*.cjs': Check.parser.es7.default\n      },\n      'special': [\n        Check.special.bin,\n        Check.special.eslint\n      ]\n    }\n\n    console.log(folderPath)\n\n    Check(folderPath, option, (unused) => {\n      console.dir(unused.dependencies) // an array containing the unused dependencies\n      console.dir(unused.devDependencies) // an array containing the unused devDependencies\n      console.dir(unused.missing) // a lookup containing the dependencies missing in `package.json` and where they are used\n      // console.dir(unused.using) // a lookup indicating each dependency is used by which files\n      console.dir(unused.invalidFiles) // files that cannot access or parse\n      console.dir(unused.invalidDirs) // directories that cannot access\n    })\n\n  } catch (error) {\n    console.error(error)\n  }\n\n}\n\nmain()"]}