{"version":3,"sources":["../../../source/library/special/ava.js"],"names":[],"mappings":"AAAA,OAAO,UAAP,MAAuB,UAAvB;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAP,MAAkB,WAAlB;AACA,OAAO,IAAP,MAAiB,MAAjB;AACA,OAAO,KAAP,MAAkB,UAAlB;;AAEA,SAAS,iBAAT,QAAkC,2BAAlC;;AAEA,OAAO,eAAe,GAAf,CAAmB,QAAnB,EAA6B;AAClC;;AAEA,MAAI,cAAc,GAAG,EAArB;;AAEA,MAAI,QAAQ,GAAG,IAAI,CAAC,QAAL,CAAc,QAAd,CAAf;AACA,MAAI,OAAO,GAAG,CAAE,cAAF,EAAkB,iBAAlB,CAAd;;AAEA,MAAI,OAAO,CAAC,MAAR,CAAe,CAAC,OAAD,EAAU,OAAV,KAAsB,OAAO,GAAG,OAAH,GAAa,KAAK,CAAC,QAAD,EAAW,OAAX,EAAoB,EAAE,OAAO,IAAT,EAApB,CAA9D,EAAoG,KAApG,CAAJ,EAAgH;;AAE9G,QAAI,aAAa,GAAG,IAApB;AACA,IAAA,aAAa,GAAG,KAAK,CAAC,KAAN,CAAY,MAAM,UAAU,CAAC,QAAX,CAAoB,QAApB,EAA8B,EAAE,YAAY,OAAd,EAA9B,CAAlB,CAAhB;AACA,IAAA,aAAa,GAAG,QAAQ,KAAK,cAAb,GAA+B,aAAa,CAAC,GAAd,IAAqB,EAApD,GAA0D,aAA1E;;AAEA,QAAI,OAAO,GAAG,KAAK,CAAC,KAAN,CAAY,aAAZ,EAA2B,cAA3B,CAAd;;AAEA,IAAA,cAAc,GAAG,OAAO,CAAC,GAAR,CAAY,CAAC,UAAD,KAAgB,iBAAiB,CAAC,UAAD,CAA7C,CAAjB;;AAED;;AAED,SAAO,cAAP;;AAED","file":"ava.js","sourcesContent":["import FileSystem from 'fs-extra'\nimport JSON5 from 'json5'\nimport Match from 'minimatch'\nimport Path from 'path'\nimport Query from 'jsonpath'\n\nimport { GetDependencyName } from '../get-dependency-name.js'\n\nexport async function Ava(filePath) {\n  // console.log(`Ava('${Path.relative('', filePath)}') { ... }`)\n\n  let fileDependency = []\n\n  let fileName = Path.basename(filePath)\n  let pattern = [ 'package.json', 'ava.config.json' ]\n\n  if (pattern.reduce((isMatch, pattern) => isMatch ? isMatch : Match(fileName, pattern, { 'dot': true }), false)) {\n\n    let configuration = null\n    configuration = JSON5.parse(await FileSystem.readFile(filePath, { 'encoding': 'utf-8' }))\n    configuration = fileName === 'package.json' ? (configuration.ava || {}) : configuration\n\n    let require = Query.query(configuration, '$.require[*]')\n\n    fileDependency = require.map((dependency) => GetDependencyName(dependency))\n\n  }\n\n  return fileDependency\n\n}"]}